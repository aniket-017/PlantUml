@startuml
left to right direction

package "STME" {
  [Row 2]
  node "Shelf Edge Service" as SES
}

package "Merchandising" {
  component "Merch Price API" as MPAPI
  database "Merch Price Cosmos DB" as MPCosmos
  [Row 5]
}

package "Digital" {
  [Row 3]
  [Row 4]
}

package "Logics/Hub" {
  queue "Shelf Edge Update Queue" as SEQ
  queue "Marketing Ingest Queue" as MIQ
}

package "Reporting/Analytics" {
  database "Teradata Copy" as TeradataCopy
}

package "Marketing" {
  component "Ad Campaign" as AdCampaign
  [Row 6]
}

package "Corporate" {
  [Row 1]
}

package "Third-Party" {
  cloud "Freshwater Digital" as Freshwater
  [Row 7]
}

' CMDB-declared relationships (show both directions and via-components)
[Row 2] --> [Row 5] : depends_on via Merch Price API (reads_from)
[Row 5] --> [Row 2] : upstream_of via Merch Price API (feeds)

[Row 6] --> [Row 7] : depends_on via Ad Campaign (ingests_from)
[Row 7] --> [Row 6] : upstream_of via Freshwater Digital (supplies_feed)

' Detailed system interactions realizing the above relationships
[Row 2] --> MPAPI : uses for shelf-edge pricing
MPAPI --> MPCosmos : reads_from
MPCosmos --> [Row 5] : underpins data domain

MPAPI --> SEQ : publishes price updates
SEQ --> SES : delivers shelf-edge updates
[Row 2] --> SES : serves shelf-edge experience

[Row 7] --> Freshwater : source_feed provided_by
Freshwater --> MIQ : pushes marketing feed
MIQ --> AdCampaign : ingests_from queue
[Row 6] --> AdCampaign : runs ETL/load jobs
AdCampaign --> TeradataCopy : loads to analytics DB

@enduml